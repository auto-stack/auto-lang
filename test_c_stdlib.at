use c.stdio: printf, fopen, fclose, fgets, fputs, FILE
use c.stdlib: exit, atoi

fn main() {
    printf(c"Testing C stdlib layer\n")

    let file *FILE = fopen(c"test_c_stdlib.at", c"r")
    if file == nil {
        printf(c"Failed to open file\n")
        exit(1)
    }

    let buf cstr = c"                                        "
    let line str = fgets(buf, 40, file)

    printf(c"First line: %s\n", line)

    fclose(file)

    printf(c"Success!\n")
}

// Test List index operation and varargs constructor

fn test_list_varargs() int {
    let list = List.new(1, 2, 3)
    let len = list.len()
    if len == 3 {
        1
    } else {
        0
    }
}

fn test_list_index() int {
    let list = List.new(10, 20, 30)
    let first = list[0]
    let second = list[1]
    let third = list[2]

    if first != 10 {
        0
    } else {
        if second != 20 {
            0
        } else {
            if third != 30 {
                0
            } else {
                1
            }
        }
    }
}

fn test_list_index_after_push() int {
    let list = List.new()
    list.push(100)
    list.push(200)
    let val = list[1]

    if val == 200 {
        1
    } else {
        0
    }
}

fn main() {
    let r1 = test_list_varargs()
    let r2 = test_list_index()
    let r3 = test_list_index_after_push()

    // All tests should return 1
    r1 + r2 + r3
}

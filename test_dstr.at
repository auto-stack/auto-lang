fn test_dstr_new() int {
    let s = dstr_new()
    let len = dstr_len(s)
    if len == 0 {
        1
    } else {
        0
    }
}

fn test_dstr_from_byte() int {
    let s = dstr_from_byte(65)
    let len = dstr_len(s)
    if len == 1 {
        1
    } else {
        0
    }
}

fn test_dstr_from_bytes() int {
    let s = dstr_from_bytes(65, 66)
    let len = dstr_len(s)
    if len == 2 {
        1
    } else {
        0
    }
}

fn test_dstr_push() int {
    let s = dstr_new()
    dstr_push(s, 65)
    dstr_push(s, 66)
    dstr_push(s, 67)
    let len = dstr_len(s)
    if len == 3 {
        1
    } else {
        0
    }
}

fn test_dstr_pop() int {
    let s = dstr_new()
    dstr_push(s, 65)
    dstr_push(s, 66)
    let val = dstr_pop(s)
    let len = dstr_len(s)
    if val == 66 {
        if len == 1 {
            1
        } else {
            0
        }
    } else {
        0
    }
}

fn test_dstr_get() int {
    let s = dstr_new()
    dstr_push(s, 65)
    dstr_push(s, 66)
    dstr_push(s, 67)
    let first = dstr_get(s, 0)
    let second = dstr_get(s, 1)
    let third = dstr_get(s, 2)
    if first == 65 {
        if second == 66 {
            if third == 67 {
                1
            } else {
                0
            }
        } else {
            0
        }
    } else {
        0
    }
}

fn test_dstr_set() int {
    let s = dstr_new()
    dstr_push(s, 65)
    dstr_push(s, 66)
    dstr_set(s, 0, 67)
    let val = dstr_get(s, 0)
    if val == 67 {
        1
    } else {
        0
    }
}

fn test_dstr_is_empty() int {
    let s = dstr_new()
    let empty1 = dstr_is_empty(s)
    dstr_push(s, 65)
    let empty2 = dstr_is_empty(s)
    if empty1 == 1 {
        if empty2 == 0 {
            1
        } else {
            0
        }
    } else {
        0
    }
}

fn main() {
    let r1 = test_dstr_new()
    let r2 = test_dstr_from_byte()
    let r3 = test_dstr_from_bytes()
    let r4 = test_dstr_push()
    let r5 = test_dstr_pop()
    let r6 = test_dstr_get()
    let r7 = test_dstr_set()
    let r8 = test_dstr_is_empty()

    if r1 == 1 {
        if r2 == 1 {
            if r3 == 1 {
                if r4 == 1 {
                    if r5 == 1 {
                        if r6 == 1 {
                            if r7 == 1 {
                                if r8 == 1 {
                                    1
                                } else {
                                    0
                                }
                            } else {
                                0
                            }
                        } else {
                            0
                        }
                    } else {
                        0
                    }
                } else {
                    0
                }
            } else {
                0
            }
        } else {
            0
        }
    } else {
        0
    }
}

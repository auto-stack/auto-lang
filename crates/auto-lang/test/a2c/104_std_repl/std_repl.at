use auto.io: getline, stdin
use.c <stdlib.h>
fn.c free(p cstr)

fn main() {
    mut lineptr *char = null
    mut n int = 0

    for {
        print(c"Enter a line of text: ") // TODO: print without newline

        let rn = getline(lineptr.@, n.@, stdin)

        if rn != -1 {
            if lineptr[0] == 'q' {
                break
            } else {
                print("You entered:", lineptr)
            }
        } else {
            print("Error reading line")
        }
    }

    free(lineptr)
}
